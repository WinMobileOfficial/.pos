<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AL-HAFIZ TRADERS | POS SYSTEM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { background-color: #f8fafc; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: white; display: flex; justify-content: space-around; padding: 12px 0; border-top: 1px solid #e2e8f0; box-shadow: 0 -4px 15px rgba(0,0,0,0.05); z-index: 1000; }
        .nav-item { text-align: center; color: #94a3b8; flex: 1; cursor: pointer; transition: 0.2s; }
        .nav-item.active { color: #2563eb; }
        .nav-item i { font-size: 1.3rem; display: block; margin-bottom: 3px; }
        .nav-item span { font-size: 10px; font-weight: 700; text-transform: uppercase; }
        .tab-content { display: none; padding-bottom: 100px; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .progress-ring { width: 120px; height: 120px; border-radius: 50%; background: conic-gradient(#2563eb 48%, #e2e8f0 0); display: flex; align-items: center; justify-content: center; margin: 0 auto; position: relative; }
        .progress-ring::after { content: ""; position: absolute; width: 100px; height: 100px; background: white; border-radius: 50%; }
        .progress-text { position: relative; z-index: 10; font-weight: 900; font-size: 1.2rem; color: #1e293b; }
    </style>
</head>
<body>

<div id="main-container">

    <div id="home" class="tab-content active">
        <div class="bg-white p-5 flex items-center justify-between shadow-sm border-b">
            <div class="flex items-center gap-3">
                <div class="w-14 h-14 bg-blue-600 rounded-full flex items-center justify-center text-white text-xl font-bold shadow-lg">W</div>
                <div>
                    <h2 class="font-black text-gray-900 leading-tight text-lg italic">Mohammad Waqar</h2>
                    <p class="text-[11px] text-blue-600 font-bold tracking-tighter uppercase">ID: D00420B1 | Route: Pindi</p>
                </div>
            </div>
            <i class="fa-solid fa-bell text-gray-400 text-xl"></i>
        </div>

        <div class="m-5 bg-white p-6 rounded-[2rem] shadow-xl text-center border border-gray-100">
            <h3 class="text-xs font-black text-gray-500 mb-5 uppercase tracking-widest text-left px-2">Visit Productivity</h3>
            <div class="progress-ring">
                <span class="progress-text">24/50</span>
            </div>
            <p class="mt-4 text-[10px] font-bold text-gray-400 italic underline">Daily Target 48% Completed</p>
        </div>

        <div class="mx-5 bg-white p-5 rounded-[2rem] shadow-lg border border-gray-100">
            <h3 class="text-xs font-black text-gray-500 mb-4 uppercase">Weekly Sales Trend</h3>
            <div class="h-32 flex items-end justify-between px-2 gap-2">
                <div class="w-full bg-blue-100 rounded-t-xl" style="height: 40%;"></div>
                <div class="w-full bg-blue-200 rounded-t-xl" style="height: 65%;"></div>
                <div class="w-full bg-blue-300 rounded-t-xl" style="height: 35%;"></div>
                <div class="w-full bg-blue-600 rounded-t-xl shadow-lg" style="height: 85%;"></div>
                <div class="w-full bg-blue-400 rounded-t-xl" style="height: 55%;"></div>
            </div>
            <div class="flex justify-between text-[9px] font-black text-gray-400 mt-3 px-1 uppercase">
                <span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span>
            </div>
        </div>
    </div>

    <div id="journey" class="tab-content">
        <div class="bg-blue-600 p-6 text-white sticky top-0 z-50 rounded-b-[2rem] shadow-xl">
            <h2 class="text-xl font-black italic">JOURNEY PLAN</h2>
            <p class="text-xs font-bold opacity-80 uppercase tracking-widest">Route: North-04 | Monday</p>
        </div>
        <div class="p-5 space-y-4" id="journeyList">
            </div>
    </div>

    <div id="visit" class="tab-content">
        <div class="bg-gray-900 p-6 text-white shadow-2xl sticky top-0 z-50">
            <div class="flex justify-between items-center mb-4">
                <span class="text-[10px] font-black bg-blue-600 px-3 py-1 rounded-full uppercase italic" id="selectedShopName">SELECT SHOP FIRST</span>
                <i class="fa-solid fa-cart-shopping text-blue-400"></i>
            </div>
            <div class="flex justify-between items-end">
                <div>
                    <p class="text-[10px] font-bold text-gray-400 uppercase">Current Order Value</p>
                    <h2 class="text-3xl font-black italic">Rs <span id="cartTotal">0</span></h2>
                </div>
                <div class="text-right">
                    <p class="text-[10px] font-black">ITEMS: <span id="itemCount" class="text-blue-400">0</span></p>
                    <p class="text-[10px] font-black">UNITS: <span id="unitCount" class="text-blue-400">0</span></p>
                </div>
            </div>
        </div>

        <div class="flex gap-3 p-4 overflow-x-auto no-scrollbar bg-white sticky top-[136px] z-40 border-b">
            <button class="bg-blue-600 text-white px-5 py-2 rounded-xl text-[10px] font-black uppercase">All</button>
            <button class="bg-gray-100 text-gray-500 px-5 py-2 rounded-xl text-[10px] font-black uppercase">Snacks</button>
            <button class="bg-gray-100 text-gray-500 px-5 py-2 rounded-xl text-[10px] font-black uppercase">Biscuits</button>
            <button class="bg-gray-100 text-gray-500 px-5 py-2 rounded-xl text-[10px] font-black uppercase">Beverages</button>
        </div>

        <div class="grid grid-cols-2 gap-4 p-5" id="productGrid">
            </div>

        <div class="fixed bottom-[85px] left-0 w-full px-5 pointer-events-none">
            <button onclick="finalizeOrder()" class="pointer-events-auto w-full bg-emerald-600 text-white py-4 rounded-2xl shadow-2xl font-black text-sm uppercase flex justify-between px-6 items-center">
                <span>Confirm Order</span>
                <i class="fas fa-check-circle"></i>
            </button>
        </div>
    </div>

</div>

<div class="bottom-nav">
    <div class="nav-item active" onclick="switchTab('home', this)">
        <i class="fa-solid fa-house-chimney"></i><span>Home</span>
    </div>
    <div class="nav-item" onclick="switchTab('journey', this)">
        <i class="fa-solid fa-map-location-dot"></i><span>Journey</span>
    </div>
    <div class="nav-item" onclick="switchTab('visit', this)">
        <i class="fa-solid fa-file-invoice"></i><span>Booking</span>
    </div>
    <div class="nav-item">
        <i class="fa-solid fa-tag"></i><span>Tagging</span>
    </div>
    <div class="nav-item">
        <i class="fa-solid fa-bars"></i><span>More</span>
    </div>
</div>

<script>
    // --- MOCK DATA ---
    const shops = [
        { id: 1, name: "Al-Hafiz Karyana Store", area: "Main Bazaar", dist: "0.02 KM", last: "Rs 4,500" },
        { id: 2, name: "Malik Shakir KS", area: "Station Road", dist: "0.45 KM", last: "Rs 12,200" },
        { id: 3, name: "Bismillah General Store", area: "Chiniot Road", dist: "1.2 KM", last: "Rs 800" },
        { id: 4, name: "Haji Super Market", area: "Pindi Road", dist: "2.1 KM", last: "Rs 30,000" }
    ];

    const products = [
        { id: 1, name: "Sada Papar (S)", price: 600, img: "https://via.placeholder.com/150/f1f5f9/000000?text=S-Papar" },
        { id: 2, name: "Masala Papar (L)", price: 1200, img: "https://via.placeholder.com/150/f1f5f9/000000?text=M-Papar" },
        { id: 3, name: "Choco Biscuit", price: 450, img: "https://via.placeholder.com/150/f1f5f9/000000?text=Biscuit" },
        { id: 4, name: "Cooking Oil 1L", price: 580, img: "https://via.placeholder.com/150/f1f5f9/000000?text=Oil" }
    ];

    let cart = [];

    // --- NAVIGATION LOGIC ---
    function switchTab(tabId, el) {
        document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
        el.classList.add('active');
        window.scrollTo(0,0);
    }

    // --- JOURNEY RENDER ---
    function renderJourney() {
        const list = document.getElementById('journeyList');
        list.innerHTML = shops.map(s => `
            <div onclick="selectShop('${s.name}')" class="bg-white p-5 rounded-3xl shadow-sm border border-gray-100 flex justify-between items-center active:scale-95 transition-transform">
                <div class="flex items-center gap-4">
                    <div class="w-10 h-10 bg-blue-50 text-blue-600 rounded-full flex items-center justify-center"><i class="fa-solid fa-store"></i></div>
                    <div>
                        <h4 class="font-black text-xs text-gray-800 uppercase italic">${s.name}</h4>
                        <p class="text-[10px] text-gray-400 font-bold">${s.area} â€¢ Last: ${s.last}</p>
                    </div>
                </div>
                <div class="text-right">
                    <span class="text-[9px] font-black text-blue-600 bg-blue-50 px-2 py-1 rounded-lg">${s.dist}</span>
                </div>
            </div>
        `).join('');
    }

    // --- SHOP SELECTION ---
    function selectShop(name) {
        document.getElementById('selectedShopName').innerText = "Ordering: " + name;
        switchTab('visit', document.querySelectorAll('.nav-item')[2]);
    }

    // --- CATALOG RENDER ---
    function renderProducts() {
        const grid = document.getElementById('productGrid');
        grid.innerHTML = products.map(p => `
            <div class="bg-white rounded-[2rem] p-4 shadow-sm border border-gray-100 flex flex-col items-center relative">
                <img src="${p.img}" class="w-24 h-24 object-contain mb-3">
                <h4 class="text-[10px] font-black text-gray-700 uppercase text-center mb-1 leading-tight">${p.name}</h4>
                <p class="text-[11px] font-black text-blue-600 mb-4">Rs ${p.price}</p>
                <div class="flex items-center gap-3 bg-gray-50 rounded-full p-1 border">
                    <button onclick="changeQty(${p.id}, -1)" class="w-8 h-8 bg-white rounded-full shadow-sm text-gray-500 font-black">-</button>
                    <span class="text-xs font-black w-4 text-center" id="qty-${p.id}">0</span>
                    <button onclick="changeQty(${p.id}, 1)" class="w-8 h-8 bg-blue-600 rounded-full shadow-sm text-white font-black">+</button>
                </div>
            </div>
        `).join('');
    }

    // --- CART LOGIC ---
    function changeQty(id, delta) {
        let item = cart.find(x => x.id === id);
        if (!item && delta > 0) {
            let p = products.find(x => x.id === id);
            cart.push({ ...p, qty: 1 });
        } else if (item) {
            item.qty += delta;
            if (item.qty <= 0) cart = cart.filter(x => x.id !== id);
        }
        updateUI();
    }

    function updateUI() {
        let total = 0, units = 0;
        cart.forEach(i => {
            total += (i.price * i.qty);
            units += i.qty;
            if(document.getElementById(`qty-${i.id}`)) document.getElementById(`qty-${i.id}`).innerText = i.qty;
        });
        products.forEach(p => {
            if(!cart.find(x => x.id === p.id)) {
                if(document.getElementById(`qty-${p.id}`)) document.getElementById(`qty-${p.id}`).innerText = "0";
            }
        });
        document.getElementById('cartTotal').innerText = total.toLocaleString();
        document.getElementById('itemCount').innerText = cart.length;
        document.getElementById('unitCount').innerText = units;
    }

    function finalizeOrder() {
        if(cart.length === 0) return alert("Haji Sahab, pehle maal to select karein!");
        alert("Order Saved Successfully for " + document.getElementById('selectedShopName').innerText);
        cart = [];
        updateUI();
    }

    // INITIALIZE
    renderJourney();
    renderProducts();
</script>
</body>
</html>
